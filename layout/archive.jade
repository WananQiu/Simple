extends layout/layout

block page-content
  - var archivesList = list_archives({ show_count: false, type: 'yearly' })

  div.archive-main
    if !is_year()

      h1.page-title Archives
        .time-line-bg
          span.time-line-disc
      .main-content        
        each post in page.posts.toArray()
          - var currentYear;
          - post.year = date(post.date, 'YYYY');
          if post.year !== currentYear
            - currentYear = post.year;
            h2.time-title
              != currentYear
              .time-line-bg
                span.time-line-disc
          h3.article-achive-title
            .time-line-bg
              span.time-line-disc
            if post.link
              a.title-link(href=post.link, target='_blank')
                span.title-date=date(post.date, 'MM-DD')
                !=post.title
            else
              - var rulRegex = /(\/index\.html?$)|(\/?$)/;
              - var path = post.path.replace(rulRegex, '');
              a.title-link(href=url_for(path), target='_blank')
                span.title-date=date(post.date, 'MM-DD')
                !=post.title
    else
      h1.page-title 
      .main-content        
        each post in page.posts.toArray()
          - var currentYear;
          - post.year = date(post.date, 'YYYY');
          if post.year !== currentYear
            - currentYear = post.year;
            h2.time-title
              != currentYear
              .time-line-bg
                span.time-line-disc
          h3.article-achive-title
            .time-line-bg
              span.time-line-disc
            if post.link
              a.title-link(href=post.link, target='_blank')
                span.title-date=date(post.date, 'MM-DD')
                !=post.title
            else
              - var rulRegex = /(\/index\.html?$)|(\/?$)/;
              - var path = post.path.replace(rulRegex, '');
              a.title-link(href=url_for(path), target='_blank')
                span.title-date=date(post.date, 'MM-DD')
                !=post.title

    include includes/pagination
